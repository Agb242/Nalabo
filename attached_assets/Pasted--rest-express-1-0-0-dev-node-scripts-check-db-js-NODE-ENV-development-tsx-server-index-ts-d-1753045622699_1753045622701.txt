
> rest-express@1.0.0 dev
> node scripts/check-db.js && NODE_ENV=development tsx server/index.ts

[dotenv@17.2.0] injecting env (9) from .env (tip: üîê encrypt with dotenvx: https://dotenvx.com)
‚úÖ Successfully connected to the database
‚úÖ Toutes les tables requises sont pr√©sentes
[dotenv@17.2.0] injecting env (8) from .env (tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`)
Docker infrastructure not available: Cannot read properties of undefined (reading 'local')
9:00:06 PM [express] serving on port 5000
‚úÖ Connexion base de donn√©es √©tablie
‚úÖ Successfully connected to the database
Browserslist: browsers data (caniuse-lite) is 9 months old. Please run:
  npx update-browserslist-db@latest
  Why you should do it regularly: https://github.com/browserslist/update-db#readme
9:00:13 PM [express] GET /api/auth/me 401 in 1ms :: {"error":"Authentication required"}
9:01:08 PM [express] GET /api/auth/me 401 in 0ms :: {"error":"Authentication required"}
9:01:08 PM [express] GET /api/workshops 401 in 1ms :: {"error":"Authentication required"}
9:01:10 PM [express] GET /api/auth/me 401 in 0ms :: {"error":"Authentication required"}
Unexpected error on idle client error: terminating connection due to administrator command
    at bn.parseErrorMessage (file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:955:41)
    at bn.handlePacket (file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:923:75)
    at bn.parse (file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:911:36)
    at S.<anonymous> (file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:962:16)
    at S.emit (file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:317:79)
    at WebSocket.<anonymous> (file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:403:19)
    at callListener (/home/runner/workspace/node_modules/ws/lib/event-target.js:290:14)
    at WebSocket.onMessage (/home/runner/workspace/node_modules/ws/lib/event-target.js:209:9)
    at WebSocket.emit (node:events:518:28)
    at Receiver.receiverOnMessage (/home/runner/workspace/node_modules/ws/lib/websocket.js:1220:20)
    at Receiver.emit (node:events:518:28)
    at Receiver.dataMessage (/home/runner/workspace/node_modules/ws/lib/receiver.js:569:14)
    at Receiver.getData (/home/runner/workspace/node_modules/ws/lib/receiver.js:496:10)
    at Receiver.startLoop (/home/runner/workspace/node_modules/ws/lib/receiver.js:167:16)
    at Receiver._write (/home/runner/workspace/node_modules/ws/lib/receiver.js:94:10)
    at writeOrBuffer (node:internal/streams/writable:572:12)
    at _write (node:internal/streams/writable:501:10)
    at Writable.write (node:internal/streams/writable:510:10)
    at TLSSocket.socketOnData (/home/runner/workspace/node_modules/ws/lib/websocket.js:1355:35)
    at TLSSocket.emit (node:events:518:28)
    at addChunk (node:internal/streams/readable:561:12)
    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
    at Readable.push (node:internal/streams/readable:392:5)
    at TLSWrap.onStreamRead (node:internal/stream_base_commons:191:23) {
  length: 116,
  severity: 'FATAL',
  code: '57P01',
  detail: undefined,
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'postgres.c',
  line: '3289',
  routine: 'ProcessInterrupts',
  client: NeonClient {
    _events: [Object: null prototype] { error: [Function (anonymous)] },
    _eventsCount: 1,
    _maxListeners: undefined,
    connectionParameters: ConnectionParameters {
      user: 'neondb_owner',
      database: 'neondb',
      port: 5432,
      host: 'ep-nameless-smoke-a2srpgro.eu-central-1.aws.neon.tech',
      binary: false,
      options: undefined,
      ssl: {},
      client_encoding: '',
      replication: undefined,
      isDomainSocket: false,
      application_name: 'nalabo_app',
      fallback_application_name: undefined,
      statement_timeout: false,
      lock_timeout: false,
      idle_in_transaction_session_timeout: false,
      query_timeout: false,
      connect_timeout: 15
    },
    user: 'neondb_owner',
    database: 'neondb',
    port: 5432,
    host: 'ep-nameless-smoke-a2srpgro.eu-central-1.aws.neon.tech',
    replication: undefined,
    _Promise: [Function: Promise],
    _types: TypeOverrides { _types: [Object], text: {}, binary: {} },
    _ending: true,
    _connecting: false,
    _connected: true,
    _connectionError: false,
    _queryable: false,
    connection: Connection {
      _events: [Object: null prototype],
      _eventsCount: 23,
      _maxListeners: undefined,
      stream: [Socket],
      _keepAlive: false,
      _keepAliveInitialDelayMillis: 0,
      lastBuffer: false,
      parsedStatements: {},
      ssl: false,
      _ending: false,
      _emitMessage: false,
      _connecting: true
    },
    queryQueue: [],
    binary: false,
    processID: -116745733,
    secretKey: 1410851534,
    ssl: false,
    _connectionTimeoutMillis: 15000,
    config: {
      connectionString: 'postgresql://neondb_owner:npg_Z2TRyzYcpaG9@ep-nameless-smoke-a2srpgro.eu-central-1.aws.neon.tech/neondb?sslmode=require&application_name=nalabo_app',
      ssl: false,
      max: 3,
      min: 1,
      idleTimeoutMillis: 60000,
      connectionTimeoutMillis: 15000,
      maxUses: 5000,
      allowExitOnIdle: true,
      retryOnFailure: true,
      retryDelay: 1000,
      maxRetries: 3,
      maxLifetimeSeconds: 0
    },
    _connectionCallback: null,
    connectionTimeoutHandle: Timeout {
      _idleTimeout: -1,
      _idlePrev: null,
      _idleNext: null,
      _idleStart: 1883,
      _onTimeout: null,
      _timerArgs: undefined,
      _repeat: null,
      _destroyed: true,
      [Symbol(refed)]: true,
      [Symbol(kHasPrimitive)]: false,
      [Symbol(asyncId)]: 1844,
      [Symbol(triggerId)]: 0
    },
    release: [Function (anonymous)],
    activeQuery: undefined,
    readyForQuery: true,
    _poolUseCount: 1
  }
}
Database connection error: error: terminating connection due to administrator command
    at bn.parseErrorMessage (file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:955:41)
    at bn.handlePacket (file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:923:75)
    at bn.parse (file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:911:36)
    at S.<anonymous> (file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:962:16)
    at S.emit (file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:317:79)
    at WebSocket.<anonymous> (file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:403:19)
    at callListener (/home/runner/workspace/node_modules/ws/lib/event-target.js:290:14)
    at WebSocket.onMessage (/home/runner/workspace/node_modules/ws/lib/event-target.js:209:9)
    at WebSocket.emit (node:events:518:28)
    at Receiver.receiverOnMessage (/home/runner/workspace/node_modules/ws/lib/websocket.js:1220:20)
    at Receiver.emit (node:events:518:28)
    at Receiver.dataMessage (/home/runner/workspace/node_modules/ws/lib/receiver.js:569:14)
    at Receiver.getData (/home/runner/workspace/node_modules/ws/lib/receiver.js:496:10)
    at Receiver.startLoop (/home/runner/workspace/node_modules/ws/lib/receiver.js:167:16)
    at Receiver._write (/home/runner/workspace/node_modules/ws/lib/receiver.js:94:10)
    at writeOrBuffer (node:internal/streams/writable:572:12)
    at _write (node:internal/streams/writable:501:10)
    at Writable.write (node:internal/streams/writable:510:10)
    at TLSSocket.socketOnData (/home/runner/workspace/node_modules/ws/lib/websocket.js:1355:35)
    at TLSSocket.emit (node:events:518:28)
    at addChunk (node:internal/streams/readable:561:12)
    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)
    at Readable.push (node:internal/streams/readable:392:5)
    at TLSWrap.onStreamRead (node:internal/stream_base_commons:191:23) {
  length: 116,
  severity: 'FATAL',
  code: '57P01',
  detail: undefined,
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: undefined,
  table: undefined,
  column: undefined,
  dataType: undefined,
  constraint: undefined,
  file: 'postgres.c',
  line: '3289',
  routine: 'ProcessInterrupts',
  client: NeonClient {
    _events: [Object: null prototype] { error: [Function (anonymous)] },
    _eventsCount: 1,
    _maxListeners: undefined,
    connectionParameters: ConnectionParameters {
      user: 'neondb_owner',
      database: 'neondb',
      port: 5432,
      host: 'ep-nameless-smoke-a2srpgro.eu-central-1.aws.neon.tech',
      binary: false,
      options: undefined,
      ssl: {},
      client_encoding: '',
      replication: undefined,
      isDomainSocket: false,
      application_name: 'nalabo_app',
      fallback_application_name: undefined,
      statement_timeout: false,
      lock_timeout: false,
      idle_in_transaction_session_timeout: false,
      query_timeout: false,
      connect_timeout: 15
    },
    user: 'neondb_owner',
    database: 'neondb',
    port: 5432,
    host: 'ep-nameless-smoke-a2srpgro.eu-central-1.aws.neon.tech',
    replication: undefined,
    _Promise: [Function: Promise],
    _types: TypeOverrides { _types: [Object], text: {}, binary: {} },
    _ending: true,
    _connecting: false,
    _connected: true,
    _connectionError: false,
    _queryable: false,
    connection: Connection {
      _events: [Object: null prototype],
      _eventsCount: 23,
      _maxListeners: undefined,
      stream: [Socket],
      _keepAlive: false,
      _keepAliveInitialDelayMillis: 0,
      lastBuffer: false,
      parsedStatements: {},
      ssl: false,
      _ending: false,
      _emitMessage: false,
      _connecting: true
    },
    queryQueue: [],
    binary: false,
    processID: -116745733,
    secretKey: 1410851534,
    ssl: false,
    _connectionTimeoutMillis: 15000,
    config: {
      connectionString: 'postgresql://neondb_owner:npg_Z2TRyzYcpaG9@ep-nameless-smoke-a2srpgro.eu-central-1.aws.neon.tech/neondb?sslmode=require&application_name=nalabo_app',
      ssl: false,
      max: 3,
      min: 1,
      idleTimeoutMillis: 60000,
      connectionTimeoutMillis: 15000,
      maxUses: 5000,
      allowExitOnIdle: true,
      retryOnFailure: true,
      retryDelay: 1000,
      maxRetries: 3,
      maxLifetimeSeconds: 0
    },
    _connectionCallback: null,
    connectionTimeoutHandle: Timeout {
      _idleTimeout: -1,
      _idlePrev: null,
      _idleNext: null,
      _idleStart: 1883,
      _onTimeout: null,
      _timerArgs: undefined,
      _repeat: null,
      _destroyed: true,
      [Symbol(refed)]: true,
      [Symbol(kHasPrimitive)]: false,
      [Symbol(asyncId)]: 1844,
      [Symbol(triggerId)]: 0
    },
    release: [Function (anonymous)],
    activeQuery: undefined,
    readyForQuery: true,
    _poolUseCount: 1
  }
}
üîÑ Tentative de reconnexion 1/5...
‚úÖ Connexion base de donn√©es √©tablie
‚úÖ Successfully connected to the database
‚úÖ Reconnexion r√©ussie
Kubernetes heartbeat failed: Error: spawn kubectl ENOENT
    at ChildProcess._handle.onexit (node:internal/child_process:285:19)
    at onErrorNT (node:internal/child_process:483:16)
    at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {
  errno: -2,
  code: 'ENOENT',
  syscall: 'spawn kubectl',
  path: 'kubectl',
  spawnargs: [ 'version', '--client' ]
}
9:06:28 PM [vite] hmr update /src/pages/home.tsx, /src/index.css?v=WvfYeHpJ2EfpLjsI1QNIB
9:06:29 PM [vite] hmr update /src/index.css?v=WvfYeHpJ2EfpLjsI1QNIB, /src/contexts/language-context.tsx
9:06:29 PM [vite] hmr update /src/index.css?v=WvfYeHpJ2EfpLjsI1QNIB
9:06:30 PM [vite] Internal server error: /home/runner/workspace/client/src/pages/home.tsx: Identifier 'GitBranch' has already been declared. (35:2)

  33 |   FileText,
  34 |   Package,
> 35 |   GitBranch
     |   ^
  36 | } from 'lucide-react';
  37 | import { useAuth } from '@/components/auth/auth-context';
  38 | import { useLanguage } from '@/contexts/language-context';
  Plugin: vite:react-babel
  File: /home/runner/workspace/client/src/pages/home.tsx:35:2
  33 |    FileText,
  34 |    Package,
  35 |    GitBranch
     |    ^
  36 |  } from 'lucide-react';
  37 |  import { useAuth } from '@/components/auth/auth-context';
      at toParseError (/home/runner/workspace/node_modules/@babel/parser/src/parse-error.ts:95:45)
      at raise (/home/runner/workspace/node_modules/@babel/parser/src/tokenizer/index.ts:1497:19)
      at declareName (/home/runner/workspace/node_modules/@babel/parser/src/plugins/typescript/scope.ts:72:21)
      at declareNameFromIdentifier (/home/runner/workspace/node_modules/@babel/parser/src/parser/lval.ts:739:16)
      at checkIdentifier (/home/runner/workspace/node_modules/@babel/parser/src/parser/lval.ts:734:12)
      at checkLVal (/home/runner/workspace/node_modules/@babel/parser/src/parser/lval.ts:636:12)
      at finishImportSpecifier (/home/runner/workspace/node_modules/@babel/parser/src/parser/statement.ts:3185:10)
      at parseImportSpecifier (/home/runner/workspace/node_modules/@babel/parser/src/parser/statement.ts:3441:17)
      at parseImportSpecifier (/home/runner/workspace/node_modules/@babel/parser/src/plugins/typescript/index.ts:4242:20)
      at parseNamedImportSpecifiers (/home/runner/workspace/node_modules/@babel/parser/src/parser/statement.ts:3402:36)
      at parseImportSpecifiersAndAfter (/home/runner/workspace/node_modules/@babel/parser/src/parser/statement.ts:3136:37)
      at parseImport (/home/runner/workspace/node_modules/@babel/parser/src/parser/statement.ts:3105:17)
      at parseImport (/home/runner/workspace/node_modules/@babel/parser/src/plugins/typescript/index.ts:2895:28)
      at parseStatementContent (/home/runner/workspace/node_modules/@babel/parser/src/parser/statement.ts:601:25)
      at parseStatementContent (/home/runner/workspace/node_modules/@babel/parser/src/plugins/typescript/index.ts:3056:20)
      at parseStatementLike (/home/runner/workspace/node_modules/@babel/parser/src/parser/statement.ts:437:17)
      at parseModuleItem (/home/runner/workspace/node_modules/@babel/parser/src/parser/statement.ts:374:17)
      at parseBlockOrModuleBlockBody (/home/runner/workspace/node_modules/@babel/parser/src/parser/statement.ts:1419:16)
      at parseBlockBody (/home/runner/workspace/node_modules/@babel/parser/src/parser/statement.ts:1393:10)
      at parseProgram (/home/runner/workspace/node_modules/@babel/parser/src/parser/statement.ts:225:10)
      at parseTopLevel (/home/runner/workspace/node_modules/@babel/parser/src/parser/statement.ts:203:25)
      at parse (/home/runner/workspace/node_modules/@babel/parser/src/parser/index.ts:90:10)
      at parse (/home/runner/workspace/node_modules/@babel/parser/src/plugins/typescript/index.ts:4192:20)
      at parse (/home/runner/workspace/node_modules/@babel/parser/src/index.ts:92:38)
      at parser (/home/runner/workspace/node_modules/@babel/core/src/parser/index.ts:28:19)
      at parser.next (<anonymous>)
      at normalizeFile (/home/runner/workspace/node_modules/@babel/core/src/transformation/normalize-file.ts:50:24)
      at normalizeFile.next (<anonymous>)
      at run (/home/runner/workspace/node_modules/@babel/core/src/transformation/index.ts:40:36)
      at run.next (<anonymous>)
      at transform (/home/runner/workspace/node_modules/@babel/core/src/transform.ts:29:20)
      at transform.next (<anonymous>)
      at step (/home/runner/workspace/node_modules/gensync/index.js:261:32)
      at /home/runner/workspace/node_modules/gensync/index.js:273:13
      at async.call.result.err.err (/home/runner/workspace/node_modules/gensync/index.js:223:11)
      at /home/runner/workspace/node_modules/gensync/index.js:189:28
      at <anonymous> (/home/runner/workspace/node_modules/@babel/core/src/gensync-utils/async.ts:90:7)
      at /home/runner/workspace/node_modules/gensync/index.js:113:33
      at step (/home/runner/workspace/node_modules/gensync/index.js:287:14)
      at /home/runner/workspace/node_modules/gensync/index.js:273:13
      at async.call.result.err.err (/home/runner/workspace/node_modules/gensync/index.js:223:11)